<div class="panel panel-primary listBook">
  <div class="panel-heading">
    Listing Books
  </div>
  <div class="panel-body">
    <%= form_tag destroy_multiple_books_path , :method => :delete do %>
    <% if current_user.has_role? :admin %>
      <%= render 'shared/action_button' %>
    <% end %>
    <table class="table table-striped table-hover table-responsive table-bordered bookTable display" data-source="<%= books_url(format: "json") %>">
      <thead>
        <tr>
          <th>Author</th>
          <th>Title</th>
          <th>Year</th>
          <th>Category</th>
          <% if current_user.has_role? :admin %>
            <th>Select</th>
            <th></th>
          <% end %>
        </tr>
      </thead>
      <tbody>
      </tbody>
    </table>
    <% end %>
  </div>
</div>

<% if current_user.has_role? :admin %>
  <script>
      $(".bookTable").dataTable({
        info: false,
        bProcessing: true,
        bServerSide: true,
        sAjaxSource: $('.bookTable').data('source'),
        bLengthChange: false,
        aaSorting: [[1, 'asc']],
        aoColumns: [
            {"sWidth": "20%", "bSortable": false },
            null,
            {"sWidth": "10%", "bSearchable": false},
            {"sWidth": "20%", "bSortable": false , "bSearchable": false},
            { "sWidth": "8%", "sClass": "alignCenter", "bSortable": false, "bSearchable": false },
            { "sWidth": "8%", "sClass": "alignCenter", "bSortable": false, "bSearchable": false }
          ]
        });
  </script>
  <% else %>
  <script >
    $(".bookTable").dataTable({
      info: false,
      bProcessing: true,
      bServerSide: true,
      sAjaxSource: $('.bookTable').data('source'),
      bLengthChange: false,
      aaSorting: [[1, 'asc']],
      aoColumns: [
          {"sWidth": "20%", "bSortable": false },
          null,
          {"sWidth": "10%", "bSearchable": false},
          {"sWidth": "20%", "bSortable": false , "bSearchable": false}
        ]
      });
  </script>
<% end %>